{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/services/analytics.service.ts","./src/app/services/display-settings.service.ts","./src/app/services/export.service.ts","./src/app/services/file.service.ts","./src/app/services/pdf.service.ts","./src/app/services/print-preview.service.ts","./src/app/services/syntax-math.service.ts","./src/app/services/theme.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { PdfService, PDFConfig, PDF_FORMATS, DEFAULT_MARGINS, PDFPageFormat, PDFMargins } from './services/pdf.service';\nimport { FileService } from './services/file.service';\nimport { ThemeService } from './services/theme.service';\nimport { PrintPreviewService } from './services/print-preview.service';\nimport { SyntaxMathService } from './services/syntax-math.service';\nimport { ExportService, ExportFormat } from './services/export.service';\nimport { DisplaySettingsService, FontFamily, DisplaySettings } from './services/display-settings.service';\nimport { AnalyticsService } from './services/analytics.service';\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  title = 'Markdown to PDF Converter';\n  markdownContent = `# Welcome to Markdown to PDF Converter\n\nThis is a **simple** and *elegant* tool to convert your markdown documents to PDF format.\n\n## Features\n\n- Real-time markdown preview\n- Beautiful PDF generation\n- Responsive design\n- Easy to use interface\n\n## How to use\n\n1. Type or paste your markdown content in the left panel\n2. See the live preview on the right panel\n3. Click \"Generate PDF\" to download your document\n\n### Code Example with Syntax Highlighting\n\n\\`\\`\\`javascript\nfunction calculateCircleArea(radius) {\n    const pi = Math.PI;\n    return pi * radius * radius;\n}\n\n// Example usage\nconst area = calculateCircleArea(5);\nconsole.log(\\`Area: \\${area.toFixed(2)}\\`);\n\\`\\`\\`\n\n### Mathematical Expressions\n\n**Inline math:** The area of a circle is $A = \\\\pi r^2$ where $r$ is the radius.\n\n**Display math:**\n$$A = \\\\pi r^2$$\n\n### Quote\n\n> \"The best way to predict the future is to create it.\" - Peter Drucker\n\n### List\n\n- Item 1\n- Item 2\n- Item 3\n\n**Happy writing!** ðŸ“`;\n\n  htmlPreview = '';\n  isGenerating = false;\n  filename = 'document.pdf';\n  isDragOver = false;\n  uploadedFileName = '';\n  isUploading = false;\n  isDarkMode = false;\n  \n  // PDF Configuration\n  pdfFormats = PDF_FORMATS;\n  selectedFormat: PDFPageFormat = PDF_FORMATS['A4'];\n  orientation: 'portrait' | 'landscape' = 'portrait';\n  margins: PDFMargins = { ...DEFAULT_MARGINS };\n  customWidth = 210;\n  customHeight = 297;\n  showAdvancedOptions = false;\n  \n  // Display Settings\n  displaySettings: DisplaySettings;\n  fontFamilies: FontFamily[] = [];\n  selectedExportFormat: ExportFormat = 'html';\n  exportFormats: { value: ExportFormat; label: string; icon: string }[] = [\n    { value: 'html', label: 'HTML', icon: 'ðŸŒ' },\n    { value: 'docx', label: 'Word Document', icon: 'ðŸ“„' },\n    { value: 'epub', label: 'E-Book', icon: 'ðŸ“š' }\n  ];\n  isExporting = false;\n\n  constructor(\n    private pdfService: PdfService, \n    private fileService: FileService,\n    private analyticsService: AnalyticsService,\n    private themeService: ThemeService,\n    private printPreviewService: PrintPreviewService,\n    private syntaxMathService: SyntaxMathService,\n    private exportService: ExportService,\n    private displaySettingsService: DisplaySettingsService\n  ) {\n    this.updatePreview();\n    \n    // Subscribe to theme changes\n    this.themeService.theme$.subscribe(theme => {\n      this.isDarkMode = theme === 'dark';\n    });\n\n    // Initialize display settings\n    this.fontFamilies = this.displaySettingsService.fontFamilies;\n    this.displaySettings = this.displaySettingsService.getCurrentSettings();\n    \n    // Subscribe to display settings changes\n    this.displaySettingsService.settings$.subscribe(settings => {\n      this.displaySettings = settings;\n    });\n  }\n\n  ngOnInit(): void {\n    // Track initial page view\n    this.analyticsService.trackPageView(this.title, '/');\n    \n    // Track app initialization\n    this.analyticsService.trackUserEngagement('app_initialized', {\n      theme: this.isDarkMode ? 'dark' : 'light',\n      display_settings: this.displaySettings\n    });\n  }\n\n  async updatePreview(): Promise<void> {\n    this.htmlPreview = await this.pdfService.markdownToHtml(this.markdownContent);\n  }\n\n  async generatePDF(): Promise<void> {\n    if (!this.markdownContent.trim()) {\n      alert('Please enter some markdown content first.');\n      return;\n    }\n\n    this.isGenerating = true;\n    try {\n      const config: PDFConfig = {\n        format: this.selectedFormat.name === 'Custom' \n          ? { name: 'Custom', width: this.customWidth, height: this.customHeight }\n          : this.selectedFormat,\n        orientation: this.orientation,\n        margins: { ...this.margins }\n      };\n      \n      await this.pdfService.generatePDFFromMarkdown(this.markdownContent, this.filename, config);\n    } catch (error) {\n      console.error('Error generating PDF:', error);\n      alert('Error generating PDF. Please try again.');\n    } finally {\n      this.isGenerating = false;\n    }\n  }\n\n  async clearContent(): Promise<void> {\n    if (confirm('Are you sure you want to clear all content?')) {\n      this.markdownContent = '';\n      await this.updatePreview();\n    }\n  }\n\n  async loadSample(): Promise<void> {\n    this.markdownContent = `# Sample Document\n\n## Introduction\n\nThis is a sample markdown document to demonstrate the **Markdown to PDF** converter.\n\n### Features Showcase\n\n1. **Headers** - Different levels of headings\n2. **Text Formatting** - *italic*, **bold**, and \\`code\\`\n3. **Lists** - Both ordered and unordered\n4. **Code Blocks** - Syntax highlighted code\n5. **Quotes** - Blockquotes for emphasis\n6. **Links** - [Visit GitHub](https://github.com)\n\n### Code Examples with Syntax Highlighting\n\n**Python:**\n\\`\\`\\`python\ndef fibonacci(n):\n    \"\"\"Calculate the nth Fibonacci number using recursion.\"\"\"\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n\n# Generate first 10 Fibonacci numbers\nfor i in range(10):\n    print(f\"F({i}) = {fibonacci(i)}\")\n\\`\\`\\`\n\n**JavaScript:**\n\\`\\`\\`javascript\nconst calculateArea = (radius) => {\n    const pi = Math.PI;\n    return pi * radius ** 2;\n};\n\nconsole.log(\\`Circle area: \\${calculateArea(5)}\\`);\n\\`\\`\\`\n\n**TypeScript:**\n\\`\\`\\`typescript\ninterface User {\n    name: string;\n    age: number;\n    email?: string;\n}\n\nconst createUser = (userData: User): User => {\n    return { ...userData };\n};\n\\`\\`\\`\n\n### Mathematical Expressions\n\n**Inline Math:** The quadratic formula is $x = \\\\frac{-b \\\\pm \\\\sqrt{b^2-4ac}}{2a}$ and Euler's identity is $e^{i\\\\pi} + 1 = 0$.\n\n**Display Math:**\n$$\\\\int_{-\\\\infty}^{\\\\infty} e^{-x^2} dx = \\\\sqrt{\\\\pi}$$\n\n$$\\\\sum_{n=1}^{\\\\infty} \\\\frac{1}{n^2} = \\\\frac{\\\\pi^2}{6}$$\n\n**Matrix Example:**\n$$\\\\begin{bmatrix}\na & b \\\\\\\\\nc & d\n\\\\end{bmatrix} \\\\begin{bmatrix}\nx \\\\\\\\\ny\n\\\\end{bmatrix} = \\\\begin{bmatrix}\nax + by \\\\\\\\\ncx + dy\n\\\\end{bmatrix}$$\n\n### Important Quote\n\n> \"Documentation is a love letter that you write to your future self.\" - Damian Conway\n\n### Task List\n\n- [x] Create markdown parser\n- [x] Implement PDF generation\n- [x] Add beautiful styling\n- [ ] Add more export formats\n- [ ] Implement file upload\n\n### Table Example\n\n| Feature | Status | Priority |\n|---------|--------|----------|\n| PDF Export | âœ… Complete | High |\n| Live Preview | âœ… Complete | High |\n| File Upload | ðŸš§ Planned | Medium |\n| Themes | ðŸ’¡ Idea | Low |\n\n---\n\n**Thank you for using our Markdown to PDF converter!** \n\n*Generated on ${new Date().toLocaleDateString()}*`;\n    await this.updatePreview();\n  }\n\n  // File Upload Methods\n  onFileSelect(event: any): void {\n    const file = event.target.files[0];\n    if (file) {\n      this.handleFileUpload(file);\n    }\n  }\n\n  onDragOver(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragOver = true;\n  }\n\n  onDragLeave(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragOver = false;\n  }\n\n  onDrop(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragOver = false;\n\n    const files = event.dataTransfer?.files;\n    if (files && files.length > 0) {\n      this.handleFileUpload(files[0]);\n    }\n  }\n\n  async handleFileUpload(file: File): Promise<void> {\n    this.isUploading = true;\n    this.uploadedFileName = '';\n\n    try {\n      const content = await this.fileService.readFileAsText(file);\n      this.markdownContent = content;\n      this.uploadedFileName = file.name;\n      \n      // Update filename for PDF generation (remove extension and add .pdf)\n      const nameWithoutExt = file.name.replace(/\\.[^/.]+$/, '');\n      this.filename = `${nameWithoutExt}.pdf`;\n      \n      await this.updatePreview();\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      alert(error instanceof Error ? error.message : 'Error uploading file. Please try again.');\n    } finally {\n      this.isUploading = false;\n    }\n  }\n\n  clearUploadedFile(): void {\n    this.uploadedFileName = '';\n    this.markdownContent = '';\n    this.filename = 'document.pdf';\n    this.updatePreview();\n  }\n\n  // Theme Methods\n  toggleTheme(): void {\n    this.themeService.toggleTheme();\n    \n    // Track theme change\n    const newTheme = this.themeService.getCurrentTheme();\n    this.analyticsService.trackThemeChange(newTheme);\n  }\n\n  // Print Preview Method\n  openPrintPreview(): void {\n    if (!this.markdownContent.trim()) {\n      alert('Please enter some markdown content first.');\n      return;\n    }\n\n    const title = this.filename.replace('.pdf', '') || 'Markdown Document';\n    this.printPreviewService.openPrintPreview(this.htmlPreview, title);\n  }\n\n  // PDF Configuration Methods\n  onFormatChange(): void {\n    if (this.selectedFormat.name === 'Custom') {\n      this.customWidth = this.selectedFormat.width;\n      this.customHeight = this.selectedFormat.height;\n    }\n  }\n\n  resetMargins(): void {\n    this.margins = { ...DEFAULT_MARGINS };\n  }\n\n  toggleAdvancedOptions(): void {\n    this.showAdvancedOptions = !this.showAdvancedOptions;\n  }\n\n  getFormatKeys(): string[] {\n    return Object.keys(this.pdfFormats);\n  }\n\n  getPageDimensions(): string {\n    const format = this.selectedFormat.name === 'Custom' \n      ? { width: this.customWidth, height: this.customHeight }\n      : this.selectedFormat;\n    \n    const width = this.orientation === 'portrait' ? format.width : format.height;\n    const height = this.orientation === 'portrait' ? format.height : format.width;\n    \n    return `${width} Ã— ${height} mm`;\n  }\n\n  // Display Settings Methods\n  onFontFamilyChange(fontValue: string): void {\n    const fontFamily = this.fontFamilies.find(f => f.value === fontValue);\n    if (fontFamily) {\n      this.displaySettingsService.setFontFamily(fontFamily);\n    }\n  }\n\n  getSansSerifFonts(): FontFamily[] {\n    return this.displaySettingsService.getFontsByCategory('sans-serif');\n  }\n\n  getSerifFonts(): FontFamily[] {\n    return this.displaySettingsService.getFontsByCategory('serif');\n  }\n\n  getMonospaceFonts(): FontFamily[] {\n    return this.displaySettingsService.getFontsByCategory('monospace');\n  }\n\n  onFontSizeChange(fontSize: number): void {\n    if (fontSize >= 10 && fontSize <= 24) {\n      this.displaySettingsService.setFontSize(fontSize);\n    }\n  }\n\n  resetDisplaySettings(): void {\n    this.displaySettingsService.resetToDefaults();\n  }\n\n  // Export Methods\n  async exportDocument(): Promise<void> {\n    if (!this.markdownContent.trim()) {\n      alert('Please enter some markdown content first.');\n      return;\n    }\n\n    this.isExporting = true;\n    try {\n      const baseFilename = this.filename.replace('.pdf', '');\n      const exportOptions = {\n        title: baseFilename || 'Markdown Document',\n        author: 'Markdown to PDF Converter',\n        fontSize: this.displaySettings.fontSize,\n        fontFamily: this.displaySettings.fontFamily.value\n      };\n\n      switch (this.selectedExportFormat) {\n        case 'html':\n          await this.exportService.exportHTML(\n            this.htmlPreview, \n            `${baseFilename}.html`, \n            exportOptions\n          );\n          break;\n        case 'docx':\n          await this.exportService.exportDOCX(\n            this.htmlPreview, \n            `${baseFilename}.docx`, \n            exportOptions\n          );\n          break;\n        case 'epub':\n          await this.exportService.exportEPUB(\n            this.htmlPreview, \n            `${baseFilename}.epub`, \n            exportOptions\n          );\n          break;\n      }\n    } catch (error) {\n      console.error('Error exporting document:', error);\n      alert('Error exporting document. Please try again.');\n    } finally {\n      this.isExporting = false;\n    }\n  }\n\n  getExportButtonText(): string {\n    const format = this.exportFormats.find(f => f.value === this.selectedExportFormat);\n    if (this.isExporting) {\n      return `ðŸ”„ Exporting ${format?.label}...`;\n    }\n    return `${format?.icon} Export ${format?.label}`;\n  }\n}\n","<div class=\"container\">\n  <div class=\"header\">\n    <div class=\"header-content\">\n      <div class=\"title-section\">\n        <h1>ðŸ“„ Markdown to PDF</h1>\n        <p>Convert your markdown documents to beautiful PDFs instantly</p>\n      </div>\n      <div class=\"header-controls\">\n        <div class=\"theme-toggle-container\">\n          <span class=\"theme-label\">{{ isDarkMode ? 'Dark Mode' : 'Light Mode' }}</span>\n          <button \n            class=\"btn btn-theme-toggle\" \n            (click)=\"toggleTheme()\"\n            [title]=\"isDarkMode ? 'Switch to light mode' : 'Switch to dark mode'\">\n            {{ isDarkMode ? 'â˜€ï¸' : 'ðŸŒ™' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- File Upload Section -->\n  <div class=\"card\">\n    <div class=\"form-group\">\n      <label class=\"form-label\">Upload Markdown File:</label>\n      <div \n        class=\"file-upload-area\" \n        [class.drag-over]=\"isDragOver\"\n        [class.uploading]=\"isUploading\"\n        (dragover)=\"onDragOver($event)\"\n        (dragleave)=\"onDragLeave($event)\"\n        (drop)=\"onDrop($event)\"\n        (click)=\"fileInput.click()\">\n        \n        <div class=\"upload-content\">\n          <div class=\"upload-icon\">ðŸ“</div>\n          <div class=\"upload-text\">\n            <p><strong>Click to browse</strong> or drag and drop your markdown file here</p>\n            <p class=\"upload-subtitle\">Supports .md, .markdown, and .txt files</p>\n          </div>\n        </div>\n        \n        <input \n          #fileInput\n          type=\"file\" \n          accept=\".md,.markdown,.txt,text/markdown,text/plain\"\n          (change)=\"onFileSelect($event)\"\n          style=\"display: none;\">\n      </div>\n      \n      <div *ngIf=\"uploadedFileName\" class=\"uploaded-file-info\">\n        <div class=\"file-info\">\n          <span class=\"file-icon\">ðŸ“„</span>\n          <span class=\"file-name\">{{ uploadedFileName }}</span>\n          <button class=\"btn-clear-file\" (click)=\"clearUploadedFile()\" title=\"Remove file\">\n            âŒ\n          </button>\n        </div>\n      </div>\n      \n      <div *ngIf=\"isUploading\" class=\"upload-progress\">\n        <div class=\"loading-spinner\"></div>\n        <span>Reading file...</span>\n      </div>\n    </div>\n  </div>\n\n  <!-- PDF Generation Section -->\n  <div class=\"card\">\n    <div class=\"pdf-config-header\">\n      <h3>PDF Configuration</h3>\n      <button \n        class=\"btn btn-toggle\" \n        (click)=\"toggleAdvancedOptions()\"\n        type=\"button\">\n        {{ showAdvancedOptions ? 'ðŸ”¼ Hide Advanced' : 'ðŸ”½ Show Advanced' }}\n      </button>\n    </div>\n\n    <!-- Basic Configuration -->\n    <div class=\"pdf-config-grid\">\n      <div class=\"form-group\">\n        <label class=\"form-label\" for=\"filename\">PDF Filename:</label>\n        <input \n          id=\"filename\" \n          type=\"text\" \n          class=\"form-control\" \n          [(ngModel)]=\"filename\" \n          placeholder=\"Enter filename (e.g., my-document.pdf)\">\n      </div>\n\n      <div class=\"form-group\">\n        <label class=\"form-label\" for=\"format\">Page Format:</label>\n        <select \n          id=\"format\" \n          class=\"form-control\" \n          [(ngModel)]=\"selectedFormat\" \n          (change)=\"onFormatChange()\">\n          <option *ngFor=\"let key of getFormatKeys()\" [ngValue]=\"pdfFormats[key]\">\n            {{ pdfFormats[key].name }}\n          </option>\n        </select>\n      </div>\n\n      <div class=\"form-group\">\n        <label class=\"form-label\" for=\"orientation\">Orientation:</label>\n        <select id=\"orientation\" class=\"form-control\" [(ngModel)]=\"orientation\">\n          <option value=\"portrait\">ðŸ“„ Portrait</option>\n          <option value=\"landscape\">ðŸ“„ Landscape</option>\n        </select>\n      </div>\n\n      <div class=\"form-group\">\n        <label class=\"form-label\">Page Size:</label>\n        <div class=\"page-size-display\">{{ getPageDimensions() }}</div>\n      </div>\n    </div>\n\n    <!-- Advanced Configuration -->\n    <div *ngIf=\"showAdvancedOptions\" class=\"advanced-config\">\n      <hr class=\"config-divider\">\n      \n      <!-- Custom Size Controls -->\n      <div *ngIf=\"selectedFormat.name === 'Custom'\" class=\"custom-size-controls\">\n        <h4>Custom Page Size</h4>\n        <div class=\"size-inputs\">\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"customWidth\">Width (mm):</label>\n            <input \n              id=\"customWidth\" \n              type=\"number\" \n              class=\"form-control\" \n              [(ngModel)]=\"customWidth\" \n              min=\"50\" \n              max=\"500\">\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"customHeight\">Height (mm):</label>\n            <input \n              id=\"customHeight\" \n              type=\"number\" \n              class=\"form-control\" \n              [(ngModel)]=\"customHeight\" \n              min=\"50\" \n              max=\"500\">\n          </div>\n        </div>\n      </div>\n\n      <!-- Margins Controls -->\n      <div class=\"margins-controls\">\n        <div class=\"margins-header\">\n          <h4>Page Margins (mm)</h4>\n          <button \n            class=\"btn btn-reset\" \n            (click)=\"resetMargins()\" \n            type=\"button\">\n            ðŸ”„ Reset\n          </button>\n        </div>\n        <div class=\"margins-grid\">\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"marginTop\">Top:</label>\n            <input \n              id=\"marginTop\" \n              type=\"number\" \n              class=\"form-control\" \n              [(ngModel)]=\"margins.top\" \n              min=\"0\" \n              max=\"50\">\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"marginRight\">Right:</label>\n            <input \n              id=\"marginRight\" \n              type=\"number\" \n              class=\"form-control\" \n              [(ngModel)]=\"margins.right\" \n              min=\"0\" \n              max=\"50\">\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"marginBottom\">Bottom:</label>\n            <input \n              id=\"marginBottom\" \n              type=\"number\" \n              class=\"form-control\" \n              [(ngModel)]=\"margins.bottom\" \n              min=\"0\" \n              max=\"50\">\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"marginLeft\">Left:</label>\n            <input \n              id=\"marginLeft\" \n              type=\"number\" \n              class=\"form-control\" \n              [(ngModel)]=\"margins.left\" \n              min=\"0\" \n              max=\"50\">\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"button-group\">\n      <button \n        class=\"btn btn-primary\" \n        (click)=\"generatePDF()\" \n        [disabled]=\"isGenerating\">\n        {{ isGenerating ? 'ðŸ”„ Generating...' : 'ðŸ“¥ Generate PDF' }}\n      </button>\n      <button \n        class=\"btn btn-secondary\" \n        (click)=\"exportDocument()\"\n        [disabled]=\"isExporting || !markdownContent.trim()\">\n        {{ getExportButtonText() }}\n      </button>\n      <button \n        class=\"btn btn-secondary\" \n        (click)=\"openPrintPreview()\"\n        [disabled]=\"!markdownContent.trim()\">\n        ðŸ–¨ï¸ Print Preview\n      </button>\n      <button class=\"btn btn-secondary\" (click)=\"loadSample()\">\n        ðŸ“‹ Load Sample\n      </button>\n      <button class=\"btn btn-secondary\" (click)=\"clearContent()\">\n        ðŸ—‘ï¸ Clear\n      </button>\n    </div>\n\n    <!-- Export Format Selection -->\n    <div class=\"export-format-section\">\n      <div class=\"form-group\">\n        <label class=\"form-label\">Export Format:</label>\n        <div class=\"export-format-grid\">\n          <div *ngFor=\"let format of exportFormats\" \n               class=\"export-format-option\"\n               [class.selected]=\"selectedExportFormat === format.value\"\n               (click)=\"selectedExportFormat = format.value\">\n            <span class=\"format-icon\">{{ format.icon }}</span>\n            <span class=\"format-label\">{{ format.label }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Display Settings -->\n  <div class=\"card\">\n    <div class=\"display-settings-header\">\n      <h3>Display Settings</h3>\n      <button \n        class=\"btn btn-reset\" \n        (click)=\"resetDisplaySettings()\" \n        type=\"button\">\n        ðŸ”„ Reset\n      </button>\n    </div>\n\n    <div class=\"display-settings-grid\">\n      <div class=\"form-group\">\n        <label class=\"form-label\" for=\"fontFamily\">Font Family:</label>\n        <select \n          id=\"fontFamily\" \n          class=\"form-control\" \n          [value]=\"displaySettings.fontFamily.value\"\n          (change)=\"onFontFamilyChange($any($event.target).value)\">\n          <optgroup label=\"Sans-serif\">\n            <option *ngFor=\"let font of getSansSerifFonts()\" \n                    [value]=\"font.value\">\n              {{ font.name }}\n            </option>\n          </optgroup>\n          <optgroup label=\"Serif\">\n            <option *ngFor=\"let font of getSerifFonts()\" \n                    [value]=\"font.value\">\n              {{ font.name }}\n            </option>\n          </optgroup>\n          <optgroup label=\"Monospace\">\n            <option *ngFor=\"let font of getMonospaceFonts()\" \n                    [value]=\"font.value\">\n              {{ font.name }}\n            </option>\n          </optgroup>\n        </select>\n      </div>\n\n      <div class=\"form-group\">\n        <label class=\"form-label\" for=\"fontSize\">Font Size: {{ displaySettings.fontSize }}px</label>\n        <div class=\"font-size-controls\">\n          <input \n            id=\"fontSize\"\n            type=\"range\" \n            class=\"font-size-slider\" \n            min=\"10\" \n            max=\"24\" \n            step=\"1\"\n            [value]=\"displaySettings.fontSize\"\n            (input)=\"onFontSizeChange(+$any($event.target).value)\">\n          <div class=\"font-size-buttons\">\n            <button \n              class=\"btn btn-font-size\" \n              (click)=\"onFontSizeChange(displaySettings.fontSize - 1)\"\n              [disabled]=\"displaySettings.fontSize <= 10\">\n              âˆ’\n            </button>\n            <span class=\"font-size-display\">{{ displaySettings.fontSize }}px</span>\n            <button \n              class=\"btn btn-font-size\" \n              (click)=\"onFontSizeChange(displaySettings.fontSize + 1)\"\n              [disabled]=\"displaySettings.fontSize >= 24\">\n              +\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"form-group\">\n        <label class=\"form-label\">Preview:</label>\n        <div class=\"font-preview\" [style.font-family]=\"displaySettings.fontFamily.value\" [style.font-size.px]=\"displaySettings.fontSize\">\n          The quick brown fox jumps over the lazy dog. 1234567890\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"grid\">\n    <div class=\"card\">\n      <div class=\"form-group\">\n        <label class=\"form-label\" for=\"markdown\">Markdown Content:</label>\n        <textarea \n          id=\"markdown\"\n          class=\"form-control\" \n          [(ngModel)]=\"markdownContent\" \n          (input)=\"updatePreview()\"\n          placeholder=\"Type your markdown here...\n          \nExample:\n# My Document\nThis is **bold** and *italic* text.\n\n- List item 1\n- List item 2\n\n```javascript\nconsole.log('Hello World!');\n```\"></textarea>\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <div class=\"form-group\">\n        <label class=\"form-label\">Live Preview:</label>\n        <div class=\"preview-container\" [innerHTML]=\"htmlPreview\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { environment } from '../../environments/environment';\n\ndeclare global {\n  interface Window {\n    gtag: (...args: any[]) => void;\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnalyticsService {\n\n  constructor() { }\n\n  /**\n   * Track page view\n   */\n  trackPageView(pageTitle: string, pagePath: string): void {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('config', environment.googleAnalytics.measurementId, {\n        page_title: pageTitle,\n        page_path: pagePath\n      });\n    }\n  }\n\n  /**\n   * Track custom events\n   */\n  trackEvent(eventName: string, parameters?: { [key: string]: any }): void {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('event', eventName, parameters);\n    }\n  }\n\n  /**\n   * Track PDF generation\n   */\n  trackPDFGeneration(format: string, filename: string): void {\n    this.trackEvent('pdf_generation', {\n      format: format,\n      filename: filename,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * Track file upload\n   */\n  trackFileUpload(fileType: string, fileSize: number): void {\n    this.trackEvent('file_upload', {\n      file_type: fileType,\n      file_size: fileSize,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * Track export action\n   */\n  trackExport(format: string, filename: string): void {\n    this.trackEvent('document_export', {\n      export_format: format,\n      filename: filename,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * Track theme change\n   */\n  trackThemeChange(theme: string): void {\n    this.trackEvent('theme_change', {\n      theme: theme,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * Track display settings change\n   */\n  trackDisplaySettingsChange(setting: string, value: any): void {\n    this.trackEvent('display_settings_change', {\n      setting: setting,\n      value: value,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  /**\n   * Track user engagement (time spent, interactions)\n   */\n  trackUserEngagement(action: string, details?: any): void {\n    this.trackEvent('user_engagement', {\n      action: action,\n      details: details,\n      timestamp: new Date()\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nexport interface FontFamily {\n  name: string;\n  value: string;\n  category: 'serif' | 'sans-serif' | 'monospace';\n}\n\nexport interface DisplaySettings {\n  fontFamily: FontFamily;\n  fontSize: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DisplaySettingsService {\n  private readonly SETTINGS_KEY = 'markdown-pdf-display-settings';\n  \n  // Available font families\n  public readonly fontFamilies: FontFamily[] = [\n    // Sans-serif fonts\n    { name: 'Inter (Default)', value: 'Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif', category: 'sans-serif' },\n    { name: 'Arial', value: 'Arial, sans-serif', category: 'sans-serif' },\n    { name: 'Helvetica', value: 'Helvetica, Arial, sans-serif', category: 'sans-serif' },\n    { name: 'Verdana', value: 'Verdana, Geneva, sans-serif', category: 'sans-serif' },\n    { name: 'Tahoma', value: 'Tahoma, Geneva, sans-serif', category: 'sans-serif' },\n    \n    // Serif fonts\n    { name: 'Georgia', value: 'Georgia, \"Times New Roman\", serif', category: 'serif' },\n    { name: 'Times New Roman', value: '\"Times New Roman\", Times, serif', category: 'serif' },\n    { name: 'Book Antiqua', value: '\"Book Antiqua\", Palatino, serif', category: 'serif' },\n    { name: 'Garamond', value: 'Garamond, serif', category: 'serif' },\n    \n    // Monospace fonts\n    { name: 'Monaco', value: 'Monaco, \"Lucida Console\", monospace', category: 'monospace' },\n    { name: 'Courier New', value: '\"Courier New\", Courier, monospace', category: 'monospace' },\n    { name: 'Consolas', value: 'Consolas, \"Liberation Mono\", monospace', category: 'monospace' },\n    { name: 'Source Code Pro', value: '\"Source Code Pro\", \"Courier New\", monospace', category: 'monospace' }\n  ];\n\n  // Default settings\n  private defaultSettings: DisplaySettings = {\n    fontFamily: this.fontFamilies[0], // Inter (Default)\n    fontSize: 16\n  };\n\n  private settingsSubject = new BehaviorSubject<DisplaySettings>(this.defaultSettings);\n  public settings$ = this.settingsSubject.asObservable();\n\n  constructor() {\n    this.loadSettings();\n  }\n\n  /**\n   * Load settings from localStorage\n   */\n  private loadSettings(): void {\n    try {\n      const saved = localStorage.getItem(this.SETTINGS_KEY);\n      if (saved) {\n        const parsedSettings = JSON.parse(saved);\n        // Ensure the font family exists in our list\n        const fontFamily = this.fontFamilies.find(f => f.value === parsedSettings.fontFamily?.value) \n          || this.defaultSettings.fontFamily;\n        \n        const settings: DisplaySettings = {\n          fontFamily,\n          fontSize: this.validateFontSize(parsedSettings.fontSize) || this.defaultSettings.fontSize\n        };\n        \n        this.settingsSubject.next(settings);\n        this.applySettings(settings);\n      } else {\n        this.applySettings(this.defaultSettings);\n      }\n    } catch (error) {\n      console.warn('Error loading display settings:', error);\n      this.applySettings(this.defaultSettings);\n    }\n  }\n\n  /**\n   * Save settings to localStorage\n   */\n  private saveSettings(settings: DisplaySettings): void {\n    try {\n      localStorage.setItem(this.SETTINGS_KEY, JSON.stringify(settings));\n    } catch (error) {\n      console.warn('Error saving display settings:', error);\n    }\n  }\n\n  /**\n   * Apply settings to the document\n   */\n  private applySettings(settings: DisplaySettings): void {\n    // Apply font family to preview container\n    const style = document.getElementById('dynamic-font-styles') || document.createElement('style');\n    style.id = 'dynamic-font-styles';\n    \n    style.textContent = `\n      .preview-container {\n        font-family: ${settings.fontFamily.value} !important;\n        font-size: ${settings.fontSize}px !important;\n      }\n      \n      .preview-container h1 {\n        font-size: ${settings.fontSize * 2}px !important;\n      }\n      \n      .preview-container h2 {\n        font-size: ${settings.fontSize * 1.5}px !important;\n      }\n      \n      .preview-container h3 {\n        font-size: ${settings.fontSize * 1.3}px !important;\n      }\n      \n      .preview-container h4 {\n        font-size: ${settings.fontSize * 1.1}px !important;\n      }\n      \n      .preview-container h5 {\n        font-size: ${settings.fontSize}px !important;\n      }\n      \n      .preview-container h6 {\n        font-size: ${settings.fontSize * 0.9}px !important;\n      }\n      \n      .preview-container code {\n        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;\n        font-size: ${settings.fontSize * 0.9}px !important;\n      }\n      \n      .preview-container pre code {\n        font-size: ${settings.fontSize * 0.85}px !important;\n      }\n    `;\n    \n    if (!document.head.contains(style)) {\n      document.head.appendChild(style);\n    }\n  }\n\n  /**\n   * Update font family\n   */\n  setFontFamily(fontFamily: FontFamily): void {\n    const currentSettings = this.settingsSubject.value;\n    const newSettings = { ...currentSettings, fontFamily };\n    \n    this.settingsSubject.next(newSettings);\n    this.saveSettings(newSettings);\n    this.applySettings(newSettings);\n  }\n\n  /**\n   * Update font size\n   */\n  setFontSize(fontSize: number): void {\n    const validSize = this.validateFontSize(fontSize);\n    if (!validSize) return;\n\n    const currentSettings = this.settingsSubject.value;\n    const newSettings = { ...currentSettings, fontSize: validSize };\n    \n    this.settingsSubject.next(newSettings);\n    this.saveSettings(newSettings);\n    this.applySettings(newSettings);\n  }\n\n  /**\n   * Validate font size\n   */\n  private validateFontSize(size: number): number | null {\n    if (typeof size !== 'number' || size < 10 || size > 24) {\n      return null;\n    }\n    return Math.round(size);\n  }\n\n  /**\n   * Reset to default settings\n   */\n  resetToDefaults(): void {\n    this.settingsSubject.next(this.defaultSettings);\n    this.saveSettings(this.defaultSettings);\n    this.applySettings(this.defaultSettings);\n  }\n\n  /**\n   * Get current settings\n   */\n  getCurrentSettings(): DisplaySettings {\n    return this.settingsSubject.value;\n  }\n\n  /**\n   * Get font families by category\n   */\n  getFontsByCategory(category: 'serif' | 'sans-serif' | 'monospace'): FontFamily[] {\n    return this.fontFamilies.filter(font => font.category === category);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Document, Packer, Paragraph, TextRun, HeadingLevel, AlignmentType } from 'docx';\nimport * as JSZip from 'jszip';\n\nexport type ExportFormat = 'html' | 'docx' | 'epub';\n\nexport interface ExportOptions {\n  title: string;\n  author?: string;\n  fontSize: number;\n  fontFamily: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ExportService {\n\n  constructor() { }\n\n  /**\n   * Export HTML with proper styling\n   */\n  async exportHTML(htmlContent: string, filename: string, options: ExportOptions): Promise<void> {\n    const styledHTML = this.createStyledHTML(htmlContent, options);\n    this.downloadFile(styledHTML, filename, 'text/html');\n  }\n\n  /**\n   * Export DOCX document\n   */\n  async exportDOCX(htmlContent: string, filename: string, options: ExportOptions): Promise<void> {\n    try {\n      const doc = new Document({\n        sections: [{\n          properties: {},\n          children: this.htmlToDocxElements(htmlContent, options)\n        }]\n      });\n\n      const buffer = await Packer.toBuffer(doc);\n      this.downloadFile(buffer, filename, 'application/vnd.openxmlformats-officedocument.wordprocessingml.document');\n    } catch (error) {\n      console.error('Error generating DOCX:', error);\n      throw new Error('Failed to generate DOCX. Please try again.');\n    }\n  }\n\n  /**\n   * Export EPUB e-book\n   */\n  async exportEPUB(htmlContent: string, filename: string, options: ExportOptions): Promise<void> {\n    try {\n      const zip = new JSZip();\n      \n      // Create EPUB structure\n      zip.file('mimetype', 'application/epub+zip');\n      \n      // META-INF folder\n      const metaInf = zip.folder('META-INF');\n      metaInf?.file('container.xml', this.createContainerXML());\n      \n      // OEBPS folder\n      const oebps = zip.folder('OEBPS');\n      oebps?.file('content.opf', this.createContentOPF(options));\n      oebps?.file('toc.ncx', this.createTocNCX(options));\n      oebps?.file('chapter1.xhtml', this.createChapterXHTML(htmlContent, options));\n      oebps?.file('styles.css', this.createEPUBStyles(options));\n\n      const blob = await zip.generateAsync({ type: 'blob' });\n      this.downloadFile(blob, filename, 'application/epub+zip');\n    } catch (error) {\n      console.error('Error generating EPUB:', error);\n      throw new Error('Failed to generate EPUB. Please try again.');\n    }\n  }\n\n  /**\n   * Create styled HTML document\n   */\n  private createStyledHTML(content: string, options: ExportOptions): string {\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${options.title}</title>\n    <style>\n        body {\n            font-family: ${options.fontFamily};\n            font-size: ${options.fontSize}px;\n            line-height: 1.6;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n            color: #333;\n            background: white;\n        }\n        h1, h2, h3, h4, h5, h6 {\n            margin-top: 24px;\n            margin-bottom: 12px;\n            font-weight: bold;\n        }\n        h1 { font-size: 2em; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 8px; }\n        h2 { font-size: 1.5em; color: #34495e; }\n        h3 { font-size: 1.3em; color: #34495e; }\n        p { margin-bottom: 16px; }\n        code {\n            background-color: #f4f4f4;\n            padding: 2px 6px;\n            border-radius: 3px;\n            font-family: 'Courier New', monospace;\n        }\n        pre {\n            background-color: #f4f4f4;\n            padding: 16px;\n            border-radius: 6px;\n            overflow-x: auto;\n            margin: 16px 0;\n        }\n        blockquote {\n            border-left: 4px solid #3498db;\n            padding-left: 16px;\n            margin: 16px 0;\n            color: #555;\n            font-style: italic;\n        }\n        table {\n            border-collapse: collapse;\n            width: 100%;\n            margin: 16px 0;\n        }\n        th, td {\n            border: 1px solid #ddd;\n            padding: 12px;\n            text-align: left;\n        }\n        th {\n            background-color: #f2f2f2;\n            font-weight: bold;\n        }\n        .katex { font-size: 1.1em; }\n        .katex-display { margin: 20px 0; text-align: center; }\n    </style>\n</head>\n<body>\n    <h1>${options.title}</h1>\n    ${content}\n</body>\n</html>`;\n  }\n\n  /**\n   * Convert HTML to DOCX elements (simplified)\n   */\n  private htmlToDocxElements(htmlContent: string, options: ExportOptions): Paragraph[] {\n    const elements: Paragraph[] = [];\n    \n    // Add title\n    elements.push(new Paragraph({\n      children: [new TextRun({ text: options.title, bold: true, size: Math.round(options.fontSize * 1.5) })],\n      heading: HeadingLevel.TITLE,\n      alignment: AlignmentType.CENTER\n    }));\n\n    // Simple HTML to DOCX conversion (basic implementation)\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = htmlContent;\n    \n    const textContent = tempDiv.textContent || tempDiv.innerText || '';\n    const paragraphs = textContent.split('\\n\\n').filter(p => p.trim());\n    \n    paragraphs.forEach(paragraph => {\n      if (paragraph.trim()) {\n        elements.push(new Paragraph({\n          children: [new TextRun({ text: paragraph.trim(), size: options.fontSize })],\n          spacing: { after: 200 }\n        }));\n      }\n    });\n\n    return elements;\n  }\n\n  /**\n   * Create EPUB container.xml\n   */\n  private createContainerXML(): string {\n    return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<container version=\"1.0\" xmlns=\"urn:oasis:names:tc:opendocument:xmlns:container\">\n    <rootfiles>\n        <rootfile full-path=\"OEBPS/content.opf\" media-type=\"application/oebps-package+xml\"/>\n    </rootfiles>\n</container>`;\n  }\n\n  /**\n   * Create EPUB content.opf\n   */\n  private createContentOPF(options: ExportOptions): string {\n    const author = options.author || 'Unknown Author';\n    return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<package xmlns=\"http://www.idpf.org/2007/opf\" unique-identifier=\"bookid\" version=\"2.0\">\n    <metadata xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:opf=\"http://www.idpf.org/2007/opf\">\n        <dc:title>${options.title}</dc:title>\n        <dc:creator opf:role=\"aut\">${author}</dc:creator>\n        <dc:language>en</dc:language>\n        <dc:identifier id=\"bookid\">urn:uuid:${this.generateUUID()}</dc:identifier>\n        <meta name=\"cover\" content=\"cover\"/>\n    </metadata>\n    <manifest>\n        <item id=\"ncx\" href=\"toc.ncx\" media-type=\"application/x-dtbncx+xml\"/>\n        <item id=\"chapter1\" href=\"chapter1.xhtml\" media-type=\"application/xhtml+xml\"/>\n        <item id=\"css\" href=\"styles.css\" media-type=\"text/css\"/>\n    </manifest>\n    <spine toc=\"ncx\">\n        <itemref idref=\"chapter1\"/>\n    </spine>\n</package>`;\n  }\n\n  /**\n   * Create EPUB toc.ncx\n   */\n  private createTocNCX(options: ExportOptions): string {\n    return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<ncx xmlns=\"http://www.daisy.org/z3986/2005/ncx/\" version=\"2005-1\">\n    <head>\n        <meta name=\"dtb:uid\" content=\"urn:uuid:${this.generateUUID()}\"/>\n        <meta name=\"dtb:depth\" content=\"1\"/>\n        <meta name=\"dtb:totalPageCount\" content=\"0\"/>\n        <meta name=\"dtb:maxPageNumber\" content=\"0\"/>\n    </head>\n    <docTitle>\n        <text>${options.title}</text>\n    </docTitle>\n    <navMap>\n        <navPoint id=\"navpoint-1\" playOrder=\"1\">\n            <navLabel>\n                <text>Chapter 1</text>\n            </navLabel>\n            <content src=\"chapter1.xhtml\"/>\n        </navPoint>\n    </navMap>\n</ncx>`;\n  }\n\n  /**\n   * Create EPUB chapter XHTML\n   */\n  private createChapterXHTML(content: string, options: ExportOptions): string {\n    return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <title>${options.title}</title>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"styles.css\"/>\n</head>\n<body>\n    <h1>${options.title}</h1>\n    ${content}\n</body>\n</html>`;\n  }\n\n  /**\n   * Create EPUB styles\n   */\n  private createEPUBStyles(options: ExportOptions): string {\n    return `body {\n    font-family: ${options.fontFamily};\n    font-size: ${options.fontSize}px;\n    line-height: 1.6;\n    margin: 20px;\n    color: #333;\n}\n\nh1, h2, h3, h4, h5, h6 {\n    margin-top: 24px;\n    margin-bottom: 12px;\n    font-weight: bold;\n}\n\nh1 { font-size: 2em; color: #2c3e50; }\nh2 { font-size: 1.5em; color: #34495e; }\nh3 { font-size: 1.3em; color: #34495e; }\n\np { margin-bottom: 16px; }\n\ncode {\n    background-color: #f4f4f4;\n    padding: 2px 6px;\n    border-radius: 3px;\n    font-family: 'Courier New', monospace;\n}\n\npre {\n    background-color: #f4f4f4;\n    padding: 16px;\n    border-radius: 6px;\n    overflow-x: auto;\n    margin: 16px 0;\n}\n\nblockquote {\n    border-left: 4px solid #3498db;\n    padding-left: 16px;\n    margin: 16px 0;\n    color: #555;\n    font-style: italic;\n}`;\n  }\n\n  /**\n   * Generate UUID for EPUB\n   */\n  private generateUUID(): string {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      const r = Math.random() * 16 | 0;\n      const v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  /**\n   * Download file helper\n   */\n  private downloadFile(content: string | ArrayBuffer | Blob, filename: string, mimeType: string): void {\n    let blob: Blob;\n    \n    if (content instanceof Blob) {\n      blob = content;\n    } else if (content instanceof ArrayBuffer) {\n      blob = new Blob([content], { type: mimeType });\n    } else {\n      blob = new Blob([content], { type: mimeType });\n    }\n\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FileService {\n\n  constructor() { }\n\n  /**\n   * Read file content as text\n   */\n  readFileAsText(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (!this.isValidMarkdownFile(file)) {\n        reject(new Error('Please select a valid markdown file (.md, .markdown, or .txt)'));\n        return;\n      }\n\n      const reader = new FileReader();\n      \n      reader.onload = (event) => {\n        const content = event.target?.result as string;\n        resolve(content);\n      };\n      \n      reader.onerror = () => {\n        reject(new Error('Error reading file. Please try again.'));\n      };\n      \n      reader.readAsText(file);\n    });\n  }\n\n  /**\n   * Validate if file is a markdown file\n   */\n  isValidMarkdownFile(file: File): boolean {\n    const validExtensions = ['.md', '.markdown', '.txt'];\n    const fileName = file.name.toLowerCase();\n    \n    return validExtensions.some(ext => fileName.endsWith(ext)) || \n           file.type === 'text/markdown' || \n           file.type === 'text/plain';\n  }\n\n  /**\n   * Format file size for display\n   */\n  formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 Bytes';\n    \n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    \n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { marked } from 'marked';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n// Note: We'll handle syntax highlighting in post-processing instead\nimport { SyntaxMathService } from './syntax-math.service';\nimport { DisplaySettingsService } from './display-settings.service';\n\nexport interface PDFPageFormat {\n  name: string;\n  width: number;  // in mm\n  height: number; // in mm\n}\n\nexport interface PDFMargins {\n  top: number;    // in mm\n  right: number;  // in mm\n  bottom: number; // in mm\n  left: number;   // in mm\n}\n\nexport interface PDFConfig {\n  format: PDFPageFormat;\n  orientation: 'portrait' | 'landscape';\n  margins: PDFMargins;\n}\n\nexport const PDF_FORMATS: { [key: string]: PDFPageFormat } = {\n  A4: { name: 'A4', width: 210, height: 297 },\n  LETTER: { name: 'Letter', width: 216, height: 279 },\n  LEGAL: { name: 'Legal', width: 216, height: 356 },\n  CUSTOM: { name: 'Custom', width: 210, height: 297 }\n};\n\nexport const DEFAULT_MARGINS: PDFMargins = {\n  top: 20,\n  right: 20,\n  bottom: 20,\n  left: 20\n};\n\ndeclare var Prism: any;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PdfService {\n\n  constructor(\n    private syntaxMathService: SyntaxMathService,\n    private displaySettingsService: DisplaySettingsService\n  ) {\n    this.configureMarked();\n  }\n\n  private configureMarked(): void {\n    // Configure marked options (syntax highlighting handled in post-processing)\n    marked.setOptions({\n      breaks: true,\n      gfm: true\n    });\n  }\n\n  private escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  /**\n   * Convert markdown text to HTML with syntax highlighting and math support\n   */\n  async markdownToHtml(markdown: string): Promise<string> {\n    // First convert markdown to HTML\n    let html = await marked(markdown);\n    \n    // Create a temporary element to process the HTML\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = html;\n    \n    // Apply syntax highlighting and math rendering\n    if (this.syntaxMathService.isReady()) {\n      this.syntaxMathService.processContent(tempDiv);\n      html = tempDiv.innerHTML;\n    }\n    \n    return html;\n  }\n\n  /**\n   * Generate PDF from HTML content with configuration\n   */\n  async generatePDF(htmlContent: string, filename: string = 'document.pdf', config?: PDFConfig): Promise<void> {\n    try {\n      // Use default config if not provided\n      const pdfConfig = config || {\n        format: PDF_FORMATS['A4'],\n        orientation: 'portrait',\n        margins: DEFAULT_MARGINS\n      };\n\n      // Calculate dimensions based on orientation\n      const pageWidth = pdfConfig.orientation === 'portrait' \n        ? pdfConfig.format.width \n        : pdfConfig.format.height;\n      const pageHeight = pdfConfig.orientation === 'portrait' \n        ? pdfConfig.format.height \n        : pdfConfig.format.width;\n\n      // Calculate content area\n      const contentWidth = pageWidth - pdfConfig.margins.left - pdfConfig.margins.right;\n      const contentHeight = pageHeight - pdfConfig.margins.top - pdfConfig.margins.bottom;\n\n      // Create a temporary container for the HTML content\n      const tempContainer = document.createElement('div');\n      tempContainer.innerHTML = htmlContent;\n      tempContainer.style.width = `${contentWidth}mm`;\n      tempContainer.style.padding = `${pdfConfig.margins.top}mm ${pdfConfig.margins.right}mm ${pdfConfig.margins.bottom}mm ${pdfConfig.margins.left}mm`;\n      tempContainer.style.backgroundColor = 'white';\n      tempContainer.style.fontFamily = 'Arial, sans-serif';\n      tempContainer.style.fontSize = '12px';\n      tempContainer.style.lineHeight = '1.6';\n      tempContainer.style.color = '#333';\n      tempContainer.style.position = 'absolute';\n      tempContainer.style.left = '-9999px';\n      tempContainer.style.top = '0';\n      tempContainer.style.boxSizing = 'border-box';\n\n      // Add CSS styles for PDF formatting\n      const style = document.createElement('style');\n      style.textContent = `\n        h1, h2, h3, h4, h5, h6 {\n          margin-top: 20px;\n          margin-bottom: 10px;\n          font-weight: bold;\n        }\n        h1 { font-size: 24px; color: #2c3e50; }\n        h2 { font-size: 20px; color: #34495e; }\n        h3 { font-size: 18px; color: #34495e; }\n        h4 { font-size: 16px; color: #34495e; }\n        h5 { font-size: 14px; color: #34495e; }\n        h6 { font-size: 12px; color: #34495e; }\n        p { margin-bottom: 12px; }\n        code {\n          background-color: #f4f4f4;\n          padding: 2px 4px;\n          border-radius: 3px;\n          font-family: 'Courier New', monospace;\n        }\n        pre {\n          background-color: #f4f4f4;\n          padding: 12px;\n          border-radius: 5px;\n          overflow-x: auto;\n          margin: 12px 0;\n        }\n        blockquote {\n          border-left: 4px solid #ddd;\n          padding-left: 12px;\n          margin: 12px 0;\n          color: #666;\n          font-style: italic;\n        }\n        ul, ol {\n          padding-left: 20px;\n          margin-bottom: 12px;\n        }\n        li {\n          margin-bottom: 4px;\n        }\n        table {\n          border-collapse: collapse;\n          width: 100%;\n          margin: 12px 0;\n        }\n        th, td {\n          border: 1px solid #ddd;\n          padding: 8px;\n          text-align: left;\n        }\n        th {\n          background-color: #f2f2f2;\n          font-weight: bold;\n        }\n      `;\n      tempContainer.appendChild(style);\n\n      // Add to document temporarily\n      document.body.appendChild(tempContainer);\n\n      // Convert HTML to canvas\n      const canvas = await html2canvas(tempContainer, {\n        scale: 2,\n        useCORS: true,\n        allowTaint: true,\n        backgroundColor: '#ffffff'\n      });\n\n      // Remove temporary container\n      document.body.removeChild(tempContainer);\n\n      // Create PDF with custom configuration\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF({\n        orientation: pdfConfig.orientation,\n        unit: 'mm',\n        format: [pageWidth, pageHeight]\n      });\n      \n      const imgWidth = pageWidth;\n      const imgHeight = (canvas.height * imgWidth) / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      // Add first page\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      // Add additional pages if needed\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n\n      // Save the PDF\n      pdf.save(filename);\n    } catch (error) {\n      console.error('Error generating PDF:', error);\n      throw new Error('Failed to generate PDF. Please try again.');\n    }\n  }\n\n  /**\n   * Generate PDF directly from markdown with configuration\n   */\n  async generatePDFFromMarkdown(markdown: string, filename: string = 'document.pdf', config?: PDFConfig): Promise<void> {\n    const html = await this.markdownToHtml(markdown);\n    await this.generatePDF(html, filename, config);\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PrintPreviewService {\n\n  constructor() { }\n\n  /**\n   * Open print preview in a new window\n   */\n  openPrintPreview(htmlContent: string, title: string = 'Markdown Document'): void {\n    const printWindow = window.open('', '_blank', 'width=800,height=600');\n    \n    if (!printWindow) {\n      alert('Please allow popups to use print preview feature.');\n      return;\n    }\n\n    const printDocument = this.generatePrintDocument(htmlContent, title);\n    printWindow.document.write(printDocument);\n    printWindow.document.close();\n\n    // Wait for content to load, then focus the window\n    printWindow.onload = () => {\n      printWindow.focus();\n    };\n  }\n\n  /**\n   * Generate a complete HTML document for printing\n   */\n  private generatePrintDocument(content: string, title: string): string {\n    return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${title} - Print Preview</title>\n    <style>\n        /* Print-optimized styles */\n        @page {\n            margin: 2cm;\n            size: A4;\n        }\n        \n        * {\n            box-sizing: border-box;\n        }\n        \n        body {\n            font-family: 'Georgia', 'Times New Roman', serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 21cm;\n            margin: 0 auto;\n            padding: 20px;\n            background: white;\n        }\n        \n        h1, h2, h3, h4, h5, h6 {\n            margin-top: 24px;\n            margin-bottom: 12px;\n            font-weight: bold;\n            page-break-after: avoid;\n        }\n        \n        h1 {\n            font-size: 28px;\n            color: #2c3e50;\n            border-bottom: 3px solid #3498db;\n            padding-bottom: 10px;\n        }\n        \n        h2 {\n            font-size: 24px;\n            color: #34495e;\n            border-bottom: 2px solid #bdc3c7;\n            padding-bottom: 8px;\n        }\n        \n        h3 {\n            font-size: 20px;\n            color: #34495e;\n        }\n        \n        h4 {\n            font-size: 18px;\n            color: #34495e;\n        }\n        \n        h5 {\n            font-size: 16px;\n            color: #34495e;\n        }\n        \n        h6 {\n            font-size: 14px;\n            color: #34495e;\n        }\n        \n        p {\n            margin-bottom: 16px;\n            text-align: justify;\n            orphans: 2;\n            widows: 2;\n        }\n        \n        code {\n            background-color: #f8f8f8;\n            padding: 2px 6px;\n            border-radius: 3px;\n            font-family: 'Courier New', 'Monaco', monospace;\n            font-size: 0.9em;\n            border: 1px solid #e1e1e8;\n        }\n        \n        pre {\n            background-color: #f8f8f8;\n            padding: 16px;\n            border-radius: 6px;\n            overflow-x: auto;\n            margin: 16px 0;\n            border: 1px solid #e1e1e8;\n            page-break-inside: avoid;\n        }\n        \n        pre code {\n            background: none;\n            padding: 0;\n            border: none;\n            font-size: 0.85em;\n        }\n        \n        blockquote {\n            border-left: 4px solid #3498db;\n            padding-left: 16px;\n            margin: 16px 0;\n            color: #555;\n            font-style: italic;\n            background-color: #f9f9f9;\n            padding: 16px;\n            border-radius: 0 6px 6px 0;\n        }\n        \n        ul, ol {\n            padding-left: 24px;\n            margin-bottom: 16px;\n        }\n        \n        li {\n            margin-bottom: 6px;\n            page-break-inside: avoid;\n        }\n        \n        table {\n            border-collapse: collapse;\n            width: 100%;\n            margin: 16px 0;\n            page-break-inside: avoid;\n        }\n        \n        th, td {\n            border: 1px solid #ddd;\n            padding: 12px;\n            text-align: left;\n        }\n        \n        th {\n            background-color: #f2f2f2;\n            font-weight: bold;\n        }\n        \n        tr:nth-child(even) {\n            background-color: #f9f9f9;\n        }\n        \n        img {\n            max-width: 100%;\n            height: auto;\n            page-break-inside: avoid;\n        }\n        \n        hr {\n            border: none;\n            border-top: 2px solid #bdc3c7;\n            margin: 24px 0;\n            page-break-after: avoid;\n        }\n        \n        a {\n            color: #3498db;\n            text-decoration: none;\n        }\n        \n        a:hover {\n            text-decoration: underline;\n        }\n        \n        /* Print-specific styles */\n        @media print {\n            body {\n                padding: 0;\n            }\n            \n            .no-print {\n                display: none !important;\n            }\n            \n            a[href]:after {\n                content: \" (\" attr(href) \")\";\n                font-size: 0.8em;\n                color: #666;\n            }\n            \n            a[href^=\"#\"]:after {\n                content: \"\";\n            }\n        }\n        \n        /* Print controls */\n        .print-controls {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: #fff;\n            padding: 15px;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            border: 1px solid #ddd;\n            z-index: 1000;\n        }\n        \n        .print-controls button {\n            margin: 0 5px;\n            padding: 10px 20px;\n            border: none;\n            border-radius: 5px;\n            cursor: pointer;\n            font-weight: bold;\n        }\n        \n        .print-btn {\n            background: #3498db;\n            color: white;\n        }\n        \n        .print-btn:hover {\n            background: #2980b9;\n        }\n        \n        .close-btn {\n            background: #95a5a6;\n            color: white;\n        }\n        \n        .close-btn:hover {\n            background: #7f8c8d;\n        }\n        \n        @media print {\n            .print-controls {\n                display: none;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"print-controls no-print\">\n        <button class=\"print-btn\" onclick=\"window.print()\">ðŸ–¨ï¸ Print</button>\n        <button class=\"close-btn\" onclick=\"window.close()\">âŒ Close</button>\n    </div>\n    \n    <div class=\"content\">\n        ${content}\n    </div>\n    \n    <script>\n        // Auto-focus for better user experience\n        window.focus();\n        \n        // Handle keyboard shortcuts\n        document.addEventListener('keydown', function(e) {\n            if (e.ctrlKey || e.metaKey) {\n                switch(e.key) {\n                    case 'p':\n                        e.preventDefault();\n                        window.print();\n                        break;\n                    case 'w':\n                        e.preventDefault();\n                        window.close();\n                        break;\n                }\n            }\n            if (e.key === 'Escape') {\n                window.close();\n            }\n        });\n    </script>\n</body>\n</html>`;\n  }\n}\n","import { Injectable } from '@angular/core';\n\ndeclare var Prism: any;\ndeclare var katex: any;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SyntaxMathService {\n\n  constructor() { }\n\n  /**\n   * Apply syntax highlighting to code blocks\n   */\n  highlightCodeBlocks(element: HTMLElement): void {\n    if (typeof Prism !== 'undefined') {\n      // Find all code blocks\n      const codeBlocks = element.querySelectorAll('pre code');\n      codeBlocks.forEach((block) => {\n        // Auto-detect language from class name\n        const className = block.className;\n        const languageMatch = className.match(/language-(\\w+)/);\n        \n        if (languageMatch) {\n          const language = languageMatch[1];\n          // Ensure the language is loaded\n          if (Prism.languages[language]) {\n            Prism.highlightElement(block);\n          } else {\n            // Fallback to plain text highlighting\n            block.classList.add('language-plaintext');\n            Prism.highlightElement(block);\n          }\n        } else {\n          // Add generic highlighting for code without specified language\n          block.classList.add('language-plaintext');\n          Prism.highlightElement(block);\n        }\n      });\n    }\n  }\n\n  /**\n   * Render math expressions using KaTeX\n   */\n  renderMath(element: HTMLElement): void {\n    if (typeof katex !== 'undefined') {\n      // Render inline math ($ ... $)\n      this.renderInlineMath(element);\n      \n      // Render display math ($$ ... $$)\n      this.renderDisplayMath(element);\n    }\n  }\n\n  /**\n   * Render inline math expressions\n   */\n  private renderInlineMath(element: HTMLElement): void {\n    const mathRegex = /\\$([^$\\n]+?)\\$/g;\n    this.processTextNodes(element, mathRegex, (match, mathContent) => {\n      try {\n        const rendered = katex.renderToString(mathContent.trim(), {\n          throwOnError: false,\n          displayMode: false\n        });\n        return `<span class=\"katex-inline\">${rendered}</span>`;\n      } catch (error) {\n        console.warn('KaTeX inline rendering error:', error);\n        return `<code class=\"math-error\">$${mathContent}$</code>`;\n      }\n    });\n  }\n\n  /**\n   * Render display math expressions\n   */\n  private renderDisplayMath(element: HTMLElement): void {\n    const mathRegex = /\\$\\$([^$]+?)\\$\\$/g;\n    this.processTextNodes(element, mathRegex, (match, mathContent) => {\n      try {\n        const rendered = katex.renderToString(mathContent.trim(), {\n          throwOnError: false,\n          displayMode: true\n        });\n        return `<div class=\"katex-display\">${rendered}</div>`;\n      } catch (error) {\n        console.warn('KaTeX display rendering error:', error);\n        return `<div class=\"math-error\">$$${mathContent}$$</div>`;\n      }\n    });\n  }\n\n  /**\n   * Process text nodes and replace math expressions\n   */\n  private processTextNodes(element: HTMLElement, regex: RegExp, replacer: (match: string, content: string) => string): void {\n    const walker = document.createTreeWalker(\n      element,\n      NodeFilter.SHOW_TEXT,\n      {\n        acceptNode: (node) => {\n          // Skip text nodes inside code blocks and math elements\n          const parent = node.parentElement;\n          if (parent && (\n            parent.tagName === 'CODE' ||\n            parent.tagName === 'PRE' ||\n            parent.classList.contains('katex') ||\n            parent.classList.contains('katex-display') ||\n            parent.classList.contains('katex-inline')\n          )) {\n            return NodeFilter.FILTER_REJECT;\n          }\n          return NodeFilter.FILTER_ACCEPT;\n        }\n      }\n    );\n\n    const textNodes: Text[] = [];\n    let node;\n    while (node = walker.nextNode()) {\n      textNodes.push(node as Text);\n    }\n\n    textNodes.forEach(textNode => {\n      const text = textNode.textContent || '';\n      if (regex.test(text)) {\n        const newHTML = text.replace(regex, replacer);\n        if (newHTML !== text) {\n          const tempDiv = document.createElement('div');\n          tempDiv.innerHTML = newHTML;\n          \n          // Replace the text node with the rendered content\n          const parent = textNode.parentNode;\n          if (parent) {\n            while (tempDiv.firstChild) {\n              parent.insertBefore(tempDiv.firstChild, textNode);\n            }\n            parent.removeChild(textNode);\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Apply both syntax highlighting and math rendering\n   */\n  processContent(element: HTMLElement): void {\n    // First render math (before syntax highlighting to avoid conflicts)\n    this.renderMath(element);\n    \n    // Then apply syntax highlighting\n    this.highlightCodeBlocks(element);\n  }\n\n  /**\n   * Get supported programming languages for syntax highlighting\n   */\n  getSupportedLanguages(): string[] {\n    return [\n      'javascript', 'typescript', 'python', 'java', 'csharp', 'cpp', 'c',\n      'html', 'css', 'scss', 'json', 'xml', 'yaml', 'markdown',\n      'bash', 'shell', 'sql', 'php', 'ruby', 'go', 'rust', 'swift',\n      'kotlin', 'dart', 'r', 'matlab', 'latex', 'dockerfile'\n    ];\n  }\n\n  /**\n   * Check if libraries are loaded\n   */\n  isReady(): boolean {\n    return typeof Prism !== 'undefined' && typeof katex !== 'undefined';\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nexport type Theme = 'light' | 'dark';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ThemeService {\n  private readonly THEME_KEY = 'markdown-pdf-theme';\n  private themeSubject = new BehaviorSubject<Theme>('light');\n  \n  public theme$ = this.themeSubject.asObservable();\n\n  constructor() {\n    this.initializeTheme();\n  }\n\n  private initializeTheme(): void {\n    // Check for saved theme preference or default to 'light'\n    const savedTheme = localStorage.getItem(this.THEME_KEY) as Theme;\n    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n    \n    const initialTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');\n    this.setTheme(initialTheme);\n  }\n\n  setTheme(theme: Theme): void {\n    this.themeSubject.next(theme);\n    localStorage.setItem(this.THEME_KEY, theme);\n    document.body.setAttribute('data-theme', theme);\n    \n    // Update meta theme-color for mobile browsers\n    this.updateMetaThemeColor(theme);\n  }\n\n  toggleTheme(): void {\n    const currentTheme = this.themeSubject.value;\n    const newTheme: Theme = currentTheme === 'light' ? 'dark' : 'light';\n    this.setTheme(newTheme);\n  }\n\n  getCurrentTheme(): Theme {\n    return this.themeSubject.value;\n  }\n\n  isDarkMode(): boolean {\n    return this.themeSubject.value === 'dark';\n  }\n\n  private updateMetaThemeColor(theme: Theme): void {\n    const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n    const color = theme === 'dark' ? '#1a1a1a' : '#667eea';\n    \n    if (metaThemeColor) {\n      metaThemeColor.setAttribute('content', color);\n    } else {\n      const meta = document.createElement('meta');\n      meta.name = 'theme-color';\n      meta.content = color;\n      document.head.appendChild(meta);\n    }\n  }\n}\n","export const environment = {\n  production: false,\n  googleAnalytics: {\n    measurementId: 'G-N4THX35J6Z'\n  }\n};\n","import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nimport { importProvidersFrom } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    importProvidersFrom(FormsModule)\n  ]\n}).catch(err => console.error(err));\n"],"names":["CommonModule","FormsModule","PDF_FORMATS","DEFAULT_MARGINS","i0","ÉµÉµelementStart","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµlistener","AppComponent_div_31_Template_button_click_6_listener","ÉµÉµrestoreView","_r3","ctx_r3","ÉµÉµnextContext","ÉµÉµresetView","clearUploadedFile","ÉµÉµadvance","ÉµÉµtextInterpolate","uploadedFileName","ÉµÉµelement","ÉµÉµproperty","pdfFormats","key_r5","ÉµÉµtextInterpolate1","name","ÉµÉµtwoWayListener","AppComponent_div_62_div_2_Template_input_ngModelChange_7_listener","$event","_r7","ÉµÉµtwoWayBindingSet","customWidth","AppComponent_div_62_div_2_Template_input_ngModelChange_11_listener","customHeight","ÉµÉµtwoWayProperty","ÉµÉµtemplate","AppComponent_div_62_div_2_Template","AppComponent_div_62_Template_button_click_7_listener","_r6","resetMargins","AppComponent_div_62_Template_input_ngModelChange_13_listener","margins","top","AppComponent_div_62_Template_input_ngModelChange_17_listener","right","AppComponent_div_62_Template_input_ngModelChange_21_listener","bottom","AppComponent_div_62_Template_input_ngModelChange_25_listener","left","selectedFormat","AppComponent_div_79_Template_div_click_0_listener","format_r9","_r8","$implicit","selectedExportFormat","value","ÉµÉµclassProp","icon","label","font_r10","font_r11","font_r12","AppComponent","constructor","pdfService","fileService","analyticsService","themeService","printPreviewService","syntaxMathService","exportService","displaySettingsService","title","markdownContent","htmlPreview","isGenerating","filename","isDragOver","isUploading","isDarkMode","orientation","showAdvancedOptions","fontFamilies","exportFormats","isExporting","updatePreview","theme$","subscribe","theme","displaySettings","getCurrentSettings","settings$","settings","ngOnInit","trackPageView","trackUserEngagement","display_settings","_this","_asyncToGenerator","markdownToHtml","generatePDF","_this2","trim","alert","config","format","width","height","generatePDFFromMarkdown","error","console","clearContent","_this3","confirm","loadSample","_this4","Date","toLocaleDateString","onFileSelect","event","file","target","files","handleFileUpload","onDragOver","preventDefault","stopPropagation","onDragLeave","onDrop","dataTransfer","length","_this5","content","readFileAsText","nameWithoutExt","replace","Error","message","toggleTheme","newTheme","getCurrentTheme","trackThemeChange","openPrintPreview","onFormatChange","toggleAdvancedOptions","getFormatKeys","Object","keys","getPageDimensions","onFontFamilyChange","fontValue","fontFamily","find","f","setFontFamily","getSansSerifFonts","getFontsByCategory","getSerifFonts","getMonospaceFonts","onFontSizeChange","fontSize","setFontSize","resetDisplaySettings","resetToDefaults","exportDocument","_this6","baseFilename","exportOptions","author","exportHTML","exportDOCX","exportEPUB","getExportButtonText","ÉµÉµdirectiveInject","i1","PdfService","i2","FileService","i3","AnalyticsService","i4","ThemeService","i5","PrintPreviewService","i6","SyntaxMathService","i7","ExportService","i8","DisplaySettingsService","selectors","standalone","features","ÉµÉµStandaloneFeature","decls","vars","consts","template","AppComponent_Template","rf","ctx","AppComponent_Template_button_click_12_listener","_r1","AppComponent_Template_div_dragover_18_listener","AppComponent_Template_div_dragleave_18_listener","AppComponent_Template_div_drop_18_listener","AppComponent_Template_div_click_18_listener","fileInput_r2","ÉµÉµreference","click","AppComponent_Template_input_change_29_listener","AppComponent_div_31_Template","AppComponent_div_32_Template","AppComponent_Template_button_click_37_listener","AppComponent_Template_input_ngModelChange_43_listener","AppComponent_Template_select_ngModelChange_47_listener","AppComponent_Template_select_change_47_listener","AppComponent_option_48_Template","AppComponent_Template_select_ngModelChange_52_listener","AppComponent_div_62_Template","AppComponent_Template_button_click_64_listener","AppComponent_Template_button_click_66_listener","AppComponent_Template_button_click_68_listener","AppComponent_Template_button_click_70_listener","AppComponent_Template_button_click_72_listener","AppComponent_div_79_Template","AppComponent_Template_button_click_84_listener","AppComponent_Template_select_change_90_listener","AppComponent_option_92_Template","AppComponent_option_94_Template","AppComponent_option_96_Template","AppComponent_Template_input_input_101_listener","AppComponent_Template_button_click_103_listener","AppComponent_Template_button_click_107_listener","AppComponent_Template_textarea_ngModelChange_119_listener","AppComponent_Template_textarea_input_119_listener","ÉµÉµstyleProp","ÉµÉµsanitizeHtml","i9","NgForOf","NgIf","i10","NgSelectOption","ÉµNgSelectMultipleOption","DefaultValueAccessor","NumberValueAccessor","SelectControlValueAccessor","NgControlStatus","MinValidator","MaxValidator","NgModel","styles","environment","pageTitle","pagePath","window","gtag","googleAnalytics","measurementId","page_title","page_path","trackEvent","eventName","parameters","trackPDFGeneration","timestamp","toISOString","trackFileUpload","fileType","fileSize","file_type","file_size","trackExport","export_format","trackDisplaySettingsChange","setting","action","details","factory","Éµfac","providedIn","BehaviorSubject","SETTINGS_KEY","category","defaultSettings","settingsSubject","asObservable","loadSettings","saved","localStorage","getItem","parsedSettings","JSON","parse","validateFontSize","next","applySettings","warn","saveSettings","setItem","stringify","style","document","getElementById","createElement","id","textContent","head","contains","appendChild","currentSettings","newSettings","validSize","size","Math","round","filter","font","Document","Packer","Paragraph","TextRun","HeadingLevel","AlignmentType","JSZip","htmlContent","options","styledHTML","createStyledHTML","downloadFile","doc","sections","properties","children","htmlToDocxElements","buffer","toBuffer","zip","metaInf","folder","createContainerXML","oebps","createContentOPF","createTocNCX","createChapterXHTML","createEPUBStyles","blob","generateAsync","type","elements","push","text","bold","heading","TITLE","alignment","CENTER","tempDiv","innerHTML","innerText","paragraphs","split","p","forEach","paragraph","spacing","after","generateUUID","c","r","random","v","toString","mimeType","Blob","ArrayBuffer","url","URL","createObjectURL","a","href","download","body","removeChild","revokeObjectURL","Promise","resolve","reject","isValidMarkdownFile","reader","FileReader","onload","result","onerror","readAsText","validExtensions","fileName","toLowerCase","some","ext","endsWith","formatFileSize","bytes","k","sizes","i","floor","log","parseFloat","pow","toFixed","marked","jsPDF","html2canvas","A4","LETTER","LEGAL","CUSTOM","configureMarked","setOptions","breaks","gfm","escapeHtml","div","markdown","html","isReady","processContent","_x","pdfConfig","pageWidth","pageHeight","contentWidth","contentHeight","tempContainer","padding","backgroundColor","lineHeight","color","position","boxSizing","canvas","scale","useCORS","allowTaint","imgData","toDataURL","pdf","unit","imgWidth","imgHeight","heightLeft","addImage","addPage","save","apply","arguments","_x2","ÉµÉµinject","printWindow","open","printDocument","generatePrintDocument","write","close","focus","highlightCodeBlocks","element","Prism","codeBlocks","querySelectorAll","block","className","languageMatch","match","language","languages","highlightElement","classList","add","renderMath","katex","renderInlineMath","renderDisplayMath","mathRegex","processTextNodes","mathContent","rendered","renderToString","throwOnError","displayMode","regex","replacer","walker","createTreeWalker","NodeFilter","SHOW_TEXT","acceptNode","node","parent","parentElement","tagName","FILTER_REJECT","FILTER_ACCEPT","textNodes","nextNode","textNode","test","newHTML","parentNode","firstChild","insertBefore","getSupportedLanguages","THEME_KEY","themeSubject","initializeTheme","savedTheme","systemPrefersDark","matchMedia","matches","initialTheme","setTheme","setAttribute","updateMetaThemeColor","currentTheme","metaThemeColor","querySelector","meta","production","bootstrapApplication","importProvidersFrom","providers","catch","err"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}