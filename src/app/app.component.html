<div class="container">
  <div class="header">
    <div class="header-content">
      <div class="title-section">
        <h1>📄 Markdown to PDF</h1>
        <p>Convert your markdown documents to beautiful PDFs instantly</p>
      </div>
      <div class="header-controls">
        <button 
          class="btn btn-theme-toggle" 
          (click)="toggleTheme()"
          [title]="isDarkMode ? 'Switch to light mode' : 'Switch to dark mode'">
          {{ isDarkMode ? '☀️' : '🌙' }}
        </button>
      </div>
    </div>
  </div>

  <!-- File Upload Section -->
  <div class="card">
    <div class="form-group">
      <label class="form-label">Upload Markdown File:</label>
      <div 
        class="file-upload-area" 
        [class.drag-over]="isDragOver"
        [class.uploading]="isUploading"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)"
        (click)="fileInput.click()">
        
        <div class="upload-content">
          <div class="upload-icon">📁</div>
          <div class="upload-text">
            <p><strong>Click to browse</strong> or drag and drop your markdown file here</p>
            <p class="upload-subtitle">Supports .md, .markdown, and .txt files</p>
          </div>
        </div>
        
        <input 
          #fileInput
          type="file" 
          accept=".md,.markdown,.txt,text/markdown,text/plain"
          (change)="onFileSelect($event)"
          style="display: none;">
      </div>
      
      <div *ngIf="uploadedFileName" class="uploaded-file-info">
        <div class="file-info">
          <span class="file-icon">📄</span>
          <span class="file-name">{{ uploadedFileName }}</span>
          <button class="btn-clear-file" (click)="clearUploadedFile()" title="Remove file">
            ❌
          </button>
        </div>
      </div>
      
      <div *ngIf="isUploading" class="upload-progress">
        <div class="loading-spinner"></div>
        <span>Reading file...</span>
      </div>
    </div>
  </div>

  <!-- PDF Generation Section -->
  <div class="card">
    <div class="form-group">
      <label class="form-label" for="filename">PDF Filename:</label>
      <input 
        id="filename" 
        type="text" 
        class="form-control" 
        [(ngModel)]="filename" 
        placeholder="Enter filename (e.g., my-document.pdf)"
        style="max-width: 300px;">
    </div>

    <div class="button-group">
      <button 
        class="btn btn-primary" 
        (click)="generatePDF()" 
        [disabled]="isGenerating">
        {{ isGenerating ? '🔄 Generating...' : '📥 Generate PDF' }}
      </button>
      <button 
        class="btn btn-secondary" 
        (click)="openPrintPreview()"
        [disabled]="!markdownContent.trim()">
        🖨️ Print Preview
      </button>
      <button class="btn btn-secondary" (click)="loadSample()">
        📋 Load Sample
      </button>
      <button class="btn btn-secondary" (click)="clearContent()">
        🗑️ Clear
      </button>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="form-group">
        <label class="form-label" for="markdown">Markdown Content:</label>
        <textarea 
          id="markdown"
          class="form-control" 
          [(ngModel)]="markdownContent" 
          (input)="updatePreview()"
          placeholder="Type your markdown here...
          
Example:
# My Document
This is **bold** and *italic* text.

- List item 1
- List item 2

```javascript
console.log('Hello World!');
```"></textarea>
      </div>
    </div>

    <div class="card">
      <div class="form-group">
        <label class="form-label">Live Preview:</label>
        <div class="preview-container" [innerHTML]="htmlPreview"></div>
      </div>
    </div>
  </div>
</div>
